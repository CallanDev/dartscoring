<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Darts Admin</title>
  <style>
    body { background: #111; color: #fff; font-family: sans-serif; padding: 20px; }
    h1 { color: #ffcc00; }
    button, select, input { padding: 10px; margin: 5px; font-size: 1rem; }
    .joined-player img { width: 50px; height: 50px; border-radius: 50%; object-fit: cover; }
    .joined-player { margin: 5px 0; display: flex; align-items: center; gap: 10px; }
    .logo-btn { background: red; color: white; font-weight: bold; }
    .logo-on { background: green !important; }
  </style>
</head>
<body>

<h1>Darts Admin Panel</h1>

<label>Game Mode:</label>
<select id="gameMode">
  <option value="practice">Practice</option>
  <option value="301">301</option>
  <option value="501">501</option>
  <option value="701">701</option>
  <option value="last-man-standing">Last Man Standing</option>
  <option value="ball-smash">Ball Smash</option>
</select><br>

<label>Turn Timer (seconds, 0 = off):</label>
<input type="number" id="timer" value="0" /><br>

<button id="openJoiningBtn">OPEN JOINING</button>
<button id="startGameBtn">START GAME</button>
<button id="logoToggleBtn" class="logo-btn">LOGO SCREEN</button>

<h2>Joined Players</h2>
<div id="joinedPlayersList"></div>

<script>
  const joiningKey = 'joining_open';
  const gameKey = 'current_game';
  const logoKey = 'logo_mode';

  const joinedList = document.getElementById('joinedPlayersList');
  const btn = document.getElementById('openJoiningBtn');
  const startBtn = document.getElementById('startGameBtn');
  const logoBtn = document.getElementById('logoToggleBtn');
  let logoOn = false;

  function refreshJoinedPlayers() {
    const players = JSON.parse(localStorage.getItem("joined_players") || "[]");
    joinedList.innerHTML = players.map(p =>
      `<div class="joined-player"><img src="${p.image}" /> <strong>${p.name}</strong></div>`
    ).join('');
  }

  setInterval(refreshJoinedPlayers, 1000);

  btn.onclick = () => {
    localStorage.setItem(joiningKey, "true");
    refreshJoinedPlayers();
  };

  startBtn.onclick = () => {
    const mode = document.getElementById("gameMode").value;
    const timer = parseInt(document.getElementById("timer").value) || 0;
    const players = JSON.parse(localStorage.getItem("joined_players") || "[]");
    if (players.length < 1) return alert("At least one player must join.");
    localStorage.setItem(joiningKey, "false");
    localStorage.setItem(gameKey, JSON.stringify({ mode, players, timer }));
    alert("Game started!");
  };

  logoBtn.onclick = () => {
    logoOn = !logoOn;
    localStorage.setItem(logoKey, logoOn ? "on" : "off");
    logoBtn.classList.toggle("logo-on", logoOn);
  };
</script>
</body>
</html>
