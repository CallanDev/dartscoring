<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Scoreboard</title>
  <style>
    body { background: #000; color: #fff; font-family: monospace; text-align: center; }
    h1 { margin: 20px 0; }
    table { margin: auto; border-collapse: collapse; width: 80%; }
    td, th { border: 1px solid #fff; padding: 10px; }
    #logoOverlay {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: black;
      display: flex; align-items: center; justify-content: center;
      opacity: 0; transition: opacity 1s;
      pointer-events: none;
    }
    #logoOverlay img {
      max-width: 70%;
    }
    #dartboard {
      position: relative;
      width: 400px;
      margin: auto;
    }
    .symbol {
      position: absolute;
      font-size: 20px;
    }
  </style>
</head>
<body>

<h1>Scoreboard</h1>
<div id="gameArea"></div>
<div id="logoOverlay"><img src="assets/Logo.png" /></div>

<script>
  const gameArea = document.getElementById("gameArea");
  const logoOverlay = document.getElementById("logoOverlay");
  const logoKey = 'logo_mode';

  const emojiList = ["🎯", "💣", "🔥", "⭐", "💥", "🎉", "🍀", "💎"];

  function renderGame(game) {
    gameArea.innerHTML = '';
    if (game.mode === "ball-smash") {
      const board = document.createElement("div");
      board.id = "dartboard";
      board.innerHTML = `<img src="assets/DARTS.jpg" width="100%" />`;
      gameArea.appendChild(board);
      emojiList.forEach(emoji => {
        const span = document.createElement("div");
        span.className = "symbol";
        span.textContent = emoji;
        span.style.left = (Math.random() * 90 + 5) + "%";
        span.style.top = (Math.random() * 90 + 5) + "%";
        board.appendChild(span);
      });
    } else {
      const table = document.createElement("table");
      table.innerHTML = `<tr><th>Player</th><th>Score</th><th>Average</th><th>Throws</th></tr>` +
        game.players.map(p => `
        <tr><td>${p.name}</td><td>${p.score || 0}</td><td>${p.avg || 0}</td><td>${p.throws || 0}</td></tr>`
        ).join('');
      gameArea.appendChild(table);
    }
  }

  function checkLogo() {
    const val = localStorage.getItem(logoKey);
    logoOverlay.style.opacity = (val === "on") ? "1" : "0";
  }

  function update() {
    const game = JSON.parse(localStorage.getItem("current_game") || "null");
    if (game) renderGame(game);
    checkLogo();
  }

  setInterval(update, 1000);
</script>
</body>
</html>
