<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Scoreboard</title>
  <style>
    body { margin: 0; background: #111; color: #ee0; font-family: sans-serif; text-align: center; }
    #logo, #noGame { margin-top: 50px; font-size: 2rem; }
    table { margin: 40px auto; font-size: 1.5rem; border-collapse: collapse; width: 80%; }
    th, td { padding: 12px; border: 1px solid #eee; }
    th { background: #333; }
  </style>
</head>
<body>

  <img id="logo" src="assets/Logo.png" alt="Logo" style="display:none;" />
  <div id="noGame">NO GAME ACTIVE</div>
  <div id="board" style="display:none;"></div>

<script>
function refreshBoard() {
  const game = JSON.parse(localStorage.getItem('darts_game') || '{}');
  const logoOn = localStorage.getItem('darts_logo') === 'on';

  document.body.style.background = game.active ? '#000' : '#111';
  document.getElementById('logo').style.display = (!game.active && logoOn) ? 'block':'none';
  document.getElementById('noGame').style.display = game.active ? 'none':'block';
  document.getElementById('board').style.display = game.active ? 'block':'none';

  if (!game.active) return;

  const rows = game.players.map(p => {
    const s = game.scores[p.name];
    const avg = (s.total / s.throws || 0).toFixed(2);
    return `<tr>
      <td>${p.name}</td>
      <td>${s.score!==undefined ? s.score : s.total}</td>
      <td>${s.throws}</td>
      <td>${avg}</td>
    </tr>`;
  }).join('');

  document.getElementById('board').innerHTML =
    `<table><tr><th>Player</th><th>Score/Total</th><th>Throws</th><th>Average</th></tr>${rows}</table>`;
}

window.addEventListener('storage', e => {
  if (e.key === 'darts_game' || e.key === 'darts_logo') refreshBoard();
});

refreshBoard();
</script>
</body>
</html>

